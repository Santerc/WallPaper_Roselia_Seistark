/* ================= 灵动球 & Dock ================= */
.liquid-container {
    /* position: absolute; REMOVED FOR PLUGIN */
    /* top: 60px; right: 80px; REMOVED FOR PLUGIN */
    z-index: 100;
    display: flex; flex-direction: column; align-items: flex-end;
}

/* Crystal Button */
.crystal-menu-btn {
    width: 80px; height: 80px;
    background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 0 25px rgba(220, 190, 255, 0.4), inset 0 0 30px rgba(255, 255, 255, 0.05);
    transform: rotate(45deg); 
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    position: relative;
    margin-right: 20px;
    margin-top: 20px;
    overflow: hidden;
}
.crystal-menu-btn::before {
    content: '';
    position: absolute;
    width: 60%; height: 60%;
    border: 2px solid rgba(255,255,255,0.3);
    transform: rotate(15deg);
    transition: all 1s ease-in-out;
    box-shadow: 0 0 15px rgba(220, 180, 255, 0.6);
}
.crystal-menu-btn::after {
    content: '';
    position: absolute;
    top: 5px; left: 5px; right: 5px; bottom: 5px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    pointer-events: none;
    animation: crystal-pulse 4s infinite alternate;
}
.crystal-menu-btn:hover {
    transform: rotate(225deg) scale(1.15); 
    background: rgba(255, 255, 255, 0.15);
    border-color: #fff;
    box-shadow: 0 0 60px rgba(220, 180, 255, 0.8);
}
.crystal-menu-btn:hover::before {
    transform: rotate(180deg) scale(0.8);
    border-color: #e0afff;
    box-shadow: 0 0 25px rgba(220, 180, 255, 1.0);
}
@keyframes crystal-pulse {
    0% { transform: scale(0.95); border-color: rgba(255,255,255,0.1); }
    100% { transform: scale(1.0); border-color: rgba(255,255,255,0.3); }
}

.status-dot {
    position: absolute;
    bottom: 15px; right: 15px;
    width: 5px; height: 5px; 
    border-radius: 50%;
    background: #ff4757; 
    box-shadow: 0 0 8px #ff4757;
    transition: 0.5s ease-in-out;
    opacity: 1;
    z-index: 2;
}
.crystal-menu-btn.online .status-dot {
    opacity: 0; transform: scale(0);
}

/* App Dock */
.app-dock {
    position: absolute;
    top: 50px; left: 30px; 
    width: 0; height: 0;
    pointer-events: none;
    z-index: 90;
}
.app-dock.active { pointer-events: auto; }

/* Shard Items */
.shard-item {
    position: absolute;
    top: 0; left: 0;
    display: flex; align-items: center; justify-content: center;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255,255,255,0.6);
    padding: 0; 
    width: 90px; height: 90px; 
    transform: scale(0.1) translate(0, 0) rotate(180deg);
    opacity: 0;
    filter: blur(8px);
    will-change: transform, opacity, filter;
    transition: 
        transform 0.45s cubic-bezier(0.15, 0.9, 0.3, 1.8),
        opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.3s ease-out;
    box-shadow: 0 0 15px rgba(255,255,255,0.4);
}

.app-dock.active .shard-item {
    opacity: 1;
    filter: blur(0);
    animation: shard-flash 0.5s ease-out forwards, shard-float 4s ease-in-out infinite alternate;
}

@keyframes shard-float {
    0% { margin-top: 0px; filter: brightness(1); }
    100% { margin-top: -15px; filter: brightness(1.1); }
}
/* Random Float Offsets */
.app-dock.active .shard-item:nth-child(2n) { animation-duration: 0.4s, 5s; animation-delay: 0s, -1s; }
.app-dock.active .shard-item:nth-child(3n) { animation-duration: 0.4s, 3.5s; animation-delay: 0s, -2s; }
.app-dock.active .shard-item:nth-child(5n) { animation-duration: 0.4s, 4.5s; animation-delay: 0s, -0.5s; }
.app-dock.active .shard-item:nth-child(7n) { animation-duration: 0.4s, 6s; animation-delay: 0s, -3s; }

@keyframes shard-flash {
    0% { filter: brightness(3) saturate(0); }
    50% { filter: brightness(1.5) saturate(1.2); }
    100% { filter: brightness(1) saturate(1); }
}

.shard-item img, .shard-item svg {
    width: 65%; height: 65%; 
    object-fit: contain;
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));
    transform: rotate(-15deg);
}
.shard-item.settings-btn { color: #a29bfe; padding: 0; margin: 0; }

/* Shard Positions */
.shard-item:nth-child(1) { clip-path: polygon(100% 0, 0 20%, 30% 100%, 100% 80%); }
.app-dock.active .shard-item:nth-child(1) { transform: translate(-150px, 10px) rotate(-10deg) scale(1); }

.shard-item:nth-child(2) { clip-path: polygon(50% 0, 100% 50%, 50% 100%, 0 30%); width: 100px; }
.app-dock.active .shard-item:nth-child(2) { transform: translate(-100px, 120px) rotate(15deg) scale(1); }

.shard-item:nth-child(3) { clip-path: polygon(0 0, 100% 0, 50% 100%); height: 80px; }
.app-dock.active .shard-item:nth-child(3) { transform: translate(10px, 160px) rotate(-5deg) scale(1); }

.shard-item:nth-child(4) { clip-path: polygon(20% 0, 100% 0, 80% 100%, 0 80%); }
.app-dock.active .shard-item:nth-child(4) { transform: translate(-260px, -20px) rotate(-20deg) scale(1); }

.shard-item:nth-child(5) { clip-path: polygon(0 20%, 100% 0, 100% 100%, 20% 80%); width: 80px; height: 80px; }
.app-dock.active .shard-item:nth-child(5) { transform: translate(-230px, 80px) rotate(10deg) scale(1); }

.shard-item:nth-child(6) { clip-path: polygon(0 0, 100% 30%, 80% 100%, 0 80%); }
.app-dock.active .shard-item:nth-child(6) { transform: translate(-180px, 200px) rotate(-5deg) scale(1); }

.shard-item:nth-child(7) { clip-path: polygon(20% 0, 100% 0, 70% 100%, 0% 100%); }
.app-dock.active .shard-item:nth-child(7) { transform: translate(-40px, 280px) rotate(20deg) scale(1); }

.shard-item:nth-child(n+8) { clip-path: polygon(50% 0, 100% 50%, 50% 100%, 0 50%); }
.app-dock.active .shard-item:nth-child(n+8) { transform: translate(-320px, 160px) rotate(0deg) scale(1); }
.app-dock.active .shard-item:nth-child(n+6) { transform: translate(-80px, 200px) rotate(0deg) scale(1); }

.shard-item:hover {
    z-index: 200 !important;
    background: linear-gradient(135deg, #fff, #e0e0e0) !important; 
    border-color: #fff;
    box-shadow: 0 0 30px rgba(255,255,255,0.8);
    filter: brightness(1.2);
}
.shard-item:hover img { filter: none; transform: rotate(0deg) scale(1.2); }
.shard-item:hover svg { color: #2d3436; }
